<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.cinemabox.dao.event.EventDao">

<select id="getAllEvent" resultType="com.cinemabox.vo.Event">
		select 
			event_no					no,
			event_title					title,
			event_content				content,
			event_created_Date			createdDate
		from
			cinemabox_events
	</select>
	
	
	<select id="detailEvent" parameterType="int" resultType="com.cinemabox.vo.Event">
		select 
			event_no					no,
			event_title					title,
			event_content				content
		from
			cinemabox_events
		where
			event_no = #{no}
			
	</select>
	

	<insert id="insertQuestion" parameterType="com.cinemabox.dto.Question.QuestionDto">
		insert into cinemabox_question
		(question_no, question_title, question_content, question_date, question_name, question_email, question_phone)
		values
		(question_seq.nextval, #{questionTitle}, #{questionContent},  sysDate,  #{name},  #{email},  #{phone})
	</insert>
	
	
	
	<delete id="deleteQuestion" parameterType="int">
		delete from
			cinemabox_question
		where
			question_no = #{questionNo}
	</delete>
	
	
	
	<update id="updateSatisfaction" parameterType="com.cinemabox.vo.Question">
		update
			cinemabox_question
		set
			question_satisfaction = #{satisfaction}
			
		where
			question_no = #{questionNo}
	</update>
	
	

	<update id="insertAnswer" parameterType="com.cinemabox.dto.Question.AnswerDto">
		update
			cinemabox_question
		set		
			answer_content = #{answerContent},	
			question_state ='Y',
			answer_date = sysDate
			
		where
			question_no = #{questionNo}
	</update>
	
	
	<select id="getQuestionCountByName" parameterType="com.cinemabox.dto.Question.QuestionDto" resultType="int">
		select 
			count(*)
		from
			cinemabox_question
		where
			question_name = #{name}
			and question_email = #{email}
	</select>


</mapper>